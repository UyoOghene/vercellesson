<% layout('layouts/boilerplate') -%>


<div class="edit-container">
    <h1>Edit Post</h1>
    
    <form action="/posts/<%= post._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="post[title]" value="<%= post.title %>" required>
        </div>
        
        <div class="form-group">
            <label for="caption">Caption</label>
            <textarea id="caption" name="post[caption]" required><%= post.caption %></textarea>
        </div>
        
        <!-- Current Images with Delete Option -->
        <div class="current-images">
            <h3>Current Images</h3>
            <% post.images.forEach((image, index) => { %>
                <div class="image-container">
                    <img src="<%= image.url %>" alt="Post image" class="thumbnail">
                    <label>
                        <input type="checkbox" name="deleteImages[]" value="<%= image.filename %>">
                        Delete this image
                    </label>
                </div>
            <% }); %>
        </div>
        
        <!-- New Image Upload -->
        <div class="form-group">
            <label for="images">Add More Images</label>
            <input type="file" id="images" name="image" multiple>
            <small>You can select multiple images</small>
        </div>
        
        <button type="submit" class="submit-btn">Update Post</button>
    </form>
    
    <a href="/posts/<%= post._id %>" class="cancel-link">Cancel</a>
</div>
            
            
    
    <a class="text back-link" href="/">
        <i class="fas fa-arrow-left"></i> Back to all posts
    </a>
</div>

    